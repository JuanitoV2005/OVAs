<!-- Tipos de datos punto flotante en Java -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Primitivos en Java</title>
    <link rel="stylesheet" href="../assets/css/global/principal.css">
    <link rel="stylesheet" href="../assets/css/global/niveles.css">
    <link rel="stylesheet" href="../assets/css/pag4/ieee754-to-decimal.css">
    <link rel="stylesheet" href="../assets/css/pag4/notacion-cientifica.css">
    <link rel="stylesheet" href="../assets/css/pag4/cartas-resumen.css">

    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.2/lib/p5.min.js"></script>
    <script src="../assets/js/pag4/ieee754-to-decimal.js"></script>
</head>

<body>
    <main>
        <h1>Tipos de Datos Reales en Java</h1>
        <h2>Introducci√≥n</h2>
        <p>
            En Java, cuando necesitas trabajar con n√∫meros que tienen parte fraccionaria, usas los tipos
            <code>float</code> y <code>double</code>.
            Estos no se guardan como enteros, sino siguiendo un est√°ndar especial.
        </p>

        <section class="card-grid">
            <!-- FLOAT -->
            <div class="card-teoria">
                <div class="card-bar purple"></div>
                <div class="card-body">
                    <div class="card-header">
                        <h2>float</h2>
                        <span class="badge">32 bits</span>
                    </div>
                    <p>N√∫meros en coma flotante de precisi√≥n simple. Requiere el sufijo <code>f</code> o
                        <code>F</code> al asignar literales.
                    </p>
                    <div class="card-info">
                        <p><strong>Tama√±o:</strong> 4 bytes</p>
                        <progress value="50" max="100"></progress>
                        <small>32 bits de 64</small>
                    </div>
                    <div class="card-range">
                        <strong>Rango aproximado:</strong>
                        <div class="range-box">
                            <div>M√≠nimo: 1.4e-45</div>
                            <div>M√°ximo: 3.4028235e+38</div>
                        </div>
                    </div>
                    <div class="card-range">
                        <strong>Precisi√≥n:</strong>
                        <div class="range-box">
                            ~7 d√≠gitos decimales
                        </div>
                    </div>
                    <!-- <div class="example">
                                <strong>Ejemplo:</strong>
                                <code>float pi = 3.1415927f;</code>
                            </div> -->
                </div>
            </div>

            <!-- DOUBLE -->
            <div class="card-teoria">
                <div class="card-bar indigo"></div>
                <div class="card-body">
                    <div class="card-header">
                        <h2>double</h2>
                        <span class="badge">64 bits</span>
                    </div>
                    <p>N√∫meros en coma flotante de doble precisi√≥n. Es el tipo por defecto para literales
                        decimales en Java.</p>
                    <div class="card-info">
                        <p><strong>Tama√±o:</strong> 8 bytes</p>
                        <progress value="100" max="100"></progress>
                        <small>64 bits de 64</small>
                    </div>
                    <div class="card-range">
                        <strong>Rango aproximado:</strong>
                        <div class="range-box">
                            <div>M√≠nimo: 4.9e-324</div>
                            <div>M√°ximo: 1.7976931348623157e+308</div>
                        </div>
                    </div>
                    <div class="card-range">
                        <strong>Precisi√≥n:</strong>
                        <div class="range-box">
                            ~15 d√≠gitos decimales
                        </div>
                    </div>
                    <!-- <div class="example">
                                <strong>Ejemplo:</strong>
                                <code>double e = 2.718281828459045;</code>
                            </div> -->
                </div>
            </div>
        </section>

        <br><br>
        <p>
            Se trata del est√°ndar <strong>IEEE 754</strong>: la forma en que se representan los n√∫meros reales en
            binario.
            Se construye a partir de tres componentes ‚Äî<em>signo</em>, <em>exponente</em> y <em>mantisa</em>‚Äî que
            podemos entender f√°cilmente si lo comparamos con la notaci√≥n cient√≠fica que ya conoces:
        </p>

        <div id="notacion-cientifica">
            <div class="formula-title">F√≥rmula:</div>
            <div class="formula-line">
                (<span class="ieee-part sign">‚Äì</span>) √ó
                <span class="ieee-part mantissa">4.2</span> √ó
                10<sup><span class="ieee-part exponent">7</span></sup>
            </div>
            <div class="formula-line">
                = ‚Äì42,000,000
            </div>

            <br><br>

            <ul style="list-style: none; padding-left: 0; line-height: 1.8;">
                <li>
                    <span class="ieee-part sign">‚Äì</span> :
                    Indica el <strong>signo</strong> del n√∫mero (positivo o negativo).
                </li>
                <li>
                    <span class="ieee-part exponent">7</span> :
                    Es el <strong>exponente</strong>, que nos dice cu√°ntas veces multiplicamos por la base (10).
                </li>
                <li>
                    <span class="ieee-part mantissa">4.2</span> :
                    Es la <strong>mantisa</strong> o los <em>d√≠gitos significativos</em> del n√∫mero.
                </li>
            </ul>
        </div>

        <p>
            La idea de este cap√≠tulo es aprender el paso a paso para convertir un n√∫mero en formato <strong>IEEE
                754</strong>
            a su valor decimal. En este caso, trabajaremos con <code>float</code>. Sin embargo, 
            los pasos que seguiremos son los mismos respecto a <code>double</code></strong>,
            solo cambian las longitudes:
        </p>
        <ul>
            <li><code>float</code> ‚Üí 1 bit de signo, 8 bits de exponente, 23 bits de mantisa.</li>
            <li><code>double</code> ‚Üí 1 bit de signo, 11 bits de exponente, 52 bits de mantisa.</li>
        </ul>

        <div class="converter-container">

            <h2>Conversi√≥n de IEEE 754 a Decimal</h1>

                <p>Convierte el n√∫mero en formato IEEE 754 (32 bits)
                    <strong>01000001010001100000000000000000</strong> a
                    decimal paso a paso. Solo podr√°s avanzar al siguiente paso si completas correctamente el actual.
                </p>

                <!-- Representaci√≥n IEEE 754 -->
                <div class="binary-input-display">
                    <div class="ieee-parts">
                        <span class="ieee-part sign">0</span>
                        <span class="ieee-separator"></span>
                        <span class="ieee-part exponent">10000010</span>
                        <span class="ieee-separator"></span>
                        <span class="ieee-part mantissa">10001100000000000000000</span>
                    </div>
                    <div style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                        Signo (1 bit) | Exponente (8 bits) | Mantisa (23 bits)
                    </div>
                </div>

                <!-- Indicador de progreso -->
                <div class="conversion-progress">
                    <div class="progress-step current" id="progress-1">1</div>
                    <div class="progress-connector" id="connector-1"></div>
                    <div class="progress-step pending" id="progress-2">2</div>
                    <div class="progress-connector" id="connector-2"></div>
                    <div class="progress-step pending" id="progress-3">3</div>
                    <div class="progress-connector" id="connector-3"></div>
                    <div class="progress-step pending" id="progress-4">4</div>
                    <div class="progress-connector" id="connector-4"></div>
                    <div class="progress-step pending" id="progress-5">5</div>
                    <div class="progress-connector" id="connector-5"></div>
                    <div class="progress-step pending" id="progress-6">6</div>
                </div>

                <!-- Paso 1: Interpretar el bit de signo -->
                <div class="conversion-step" id="step-1">
                    <div class="step-bar" id="bar-1"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-1">1</div>
                            <h3>Interpretar el bit de signo</h3>
                        </div>
                        <div class="step-status pending" id="status-1">Pendiente</div>
                    </div>
                    <div class="step-content">
                        <div class="binary-input-display white">
                            <div class="ieee-parts">
                                <span class="ieee-part sign">0</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part gray">10000010</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part gray">10001100000000000000000</span>
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                                Signo (1 bit) | Exponente (8 bits) | Mantisa (23 bits)
                            </div>
                        </div>
                        <p class="step-description">
                            El primer bit (m√°s significativo) en IEEE 754 representa el signo:
                            <br>‚Ä¢ <strong>0</strong> = n√∫mero positivo
                            <br>‚Ä¢ <strong>1</strong> = n√∫mero negativo
                            <br><br>Observa el bit de signo: <strong style="color: #92400e;">0</strong>
                            <br>¬øQu√© significa esto para nuestro n√∫mero?
                        </p>

                        <div class="option-group">
                            <div class="option-button" data-value="positive">
                                <div class="option-radio"></div>
                                <span>El n√∫mero es positivo</span>
                            </div>
                            <div class="option-button" data-value="negative">
                                <div class="option-radio"></div>
                                <span>El n√∫mero es negativo</span>
                            </div>
                        </div>

                        <button class="verify-button" id="verify-1" disabled>
                            <span>Verificar Respuesta</span>
                        </button>

                        <div class="feedback-message" id="feedback-1" style="display: none;"></div>
                    </div>
                </div>

                <!-- Paso 2: Convertir exponente -->
                <div class="conversion-step locked" id="step-2">
                    <div class="step-bar" id="bar-2"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-2">2</div>
                            <h3>Convertir exponente a decimal</h3>
                        </div>
                        <div class="step-status locked" id="status-2">Bloqueado</div>
                    </div>
                    <div class="step-content">
                        <div class="binary-input-display white">
                            <div class="ieee-parts">
                                <span class="ieee-part gray">0</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part exponent">10000010</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part gray">10001100000000000000000</span>
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                                Signo (1 bit) | Exponente (8 bits) | Mantisa (23 bits)
                            </div>
                        </div>

                        <p class="step-description">
                            El exponente en IEEE 754 son los siguientes 8 bits: <strong
                                style="color: #1e40af;">10000010</strong>
                            <br><br>Para encontrar su equivalente en decimal, utiliza el m√©todo para convertir
                            cadenas
                            binarias positivas:
                            <br>10000010‚ÇÇ = 1√ó2‚Å∑ + 0√ó2‚Å∂ + 0√ó2‚Åµ + 0√ó2‚Å¥ + 0√ó2¬≥ + 0√ó2¬≤ + 1√ó2¬π + 0√ó2‚Å∞
                            <br>= 128 + 0 + 0 + 0 + 0 + 0 + 2 + 0 = ?
                        </p>

                        <div class="input-group">
                            <label class="input-label">Exponente en decimal:</label>
                            <input type="number" class="step-input" id="exponent-decimal" placeholder="Ejemplo: 115"
                                disabled>
                        </div>

                        <button class="verify-button" id="verify-2" disabled>
                            <span>Verificar Conversi√≥n</span>
                        </button>

                        <div class="feedback-message" id="feedback-2" style="display: none;"></div>
                    </div>
                </div>

                <!-- Paso 3: Calcular exponente real -->
                <div class="conversion-step locked" id="step-3">
                    <div class="step-bar" id="bar-3"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-3">3</div>
                            <h3>Calcular exponente real (quitar sesgo)</h3>
                        </div>
                        <div class="step-status locked" id="status-3">Bloqueado</div>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            IEEE 754 de 32 bits usa un <strong>sesgo de 127</strong>. Para obtener el exponente
                            real:
                            <br><strong>Exponente real = Exponente almacenado - 127</strong>
                            <br><br>Con el exponente que calculaste (130):
                            <br>Exponente real = 130 - 127 = ?
                        </p>

                        <div class="input-group">
                            <label class="input-label">Exponente real:</label>
                            <input type="number" class="step-input" id="real-exponent" placeholder="Ejemplo: 12"
                                disabled>
                        </div>

                        <button class="verify-button" id="verify-3" disabled>
                            <span>Verificar C√°lculo</span>
                        </button>

                        <div class="feedback-message" id="feedback-3" style="display: none;"></div>
                    </div>
                </div>

                <!-- Paso 4: Normalizar mantisa -->
                <div class="conversion-step locked" id="step-4">
                    <div class="step-bar" id="bar-4"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-4">4</div>
                            <h3>Normalizar la mantisa</h3>
                        </div>
                        <div class="step-status locked" id="status-4">Bloqueado</div>
                    </div>
                    <div class="step-content">
                        <div class="binary-input-display white">
                            <div class="ieee-parts">
                                <span class="ieee-part gray">0</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part gray">10000010</span>
                                <span class="ieee-separator"></span>
                                <span class="ieee-part mantissa">10001100000000000000000</span>
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                                Signo (1 bit) | Exponente (8 bits) | Mantisa (23 bits)
                            </div>
                        </div>
                        <p class="step-description">
                            La mantisa son los √∫ltimos 23 bits: <strong
                                style="color: #065f46;">10001100000000000000000</strong>
                            <br><br>En IEEE 754, la mantisa representa la parte fraccionaria de un n√∫mero
                            normalizado.
                            <br>Se asume un "1" impl√≠cito antes del punto decimal: <strong>1.</strong>
                            <br><br>Forma el n√∫mero normalizado: <strong>1.</strong> + mantisa
                        </p>

                        <div class="input-group">
                            <label class="input-label">N√∫mero normalizado (1.xxxxx en binario):</label>
                            <input type="text" class="step-input" id="normalized-binary"
                                placeholder="Ejemplo: 1.10000000001000010000001" disabled>
                        </div>

                        <button class="verify-button" id="verify-4" disabled>
                            <span>Verificar Normalizaci√≥n</span>
                        </button>

                        <div class="feedback-message" id="feedback-4" style="display: none;"></div>
                    </div>
                </div>

                <!-- Paso 5: Calcular la mantisa normalizada en decimal-->
                <div class="conversion-step locked" id="step-5">
                    <div class="step-bar" id="bar-5"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-5">5</div>
                            <h3>Calcular el valor decimal final</h3>
                        </div>
                        <div class="step-status locked" id="status-5">Bloqueado</div>
                    </div>
                    <div class="step-content">
                        <h4>1. Convertir mantisa en decimal</h4>
                        <p class="step-description">
                            <br>El √∫ltimo paso antes de obtener el valor real a partir de los 32 bits es transformar
                            la
                            mantisa normalizada que calculaste (1.10001100000000000000000) a su equivalente decimal.
                            <br><br>Para hacerlo, trabajamos de manera distinta el peso asignado a los bits. Al leer
                            la
                            cadena de izquierda a derecha despu√©s del punto, el exponente de 2 comienza en -1 y
                            disminuye de
                            uno en uno hacia la derecha. As√≠, cada posici√≥n representa una potencia negativa de dos
                            m√°s
                            peque√±a:
                            <br>
                        <ul>
                            <li>El 1 antes del punto es <strong>2‚Å∞ = 1</strong></li>
                            <li>Primer bit fraccionario (1) vale <strong>2‚Åª¬π = 0.5</strong></li>
                            <li>Segundo bit fraccionario (0) vale <strong>2‚Åª¬≤ = 0.25</strong> pero no suma</li>
                            <li>Tercer bit fraccionario (0) vale <strong>2‚Åª¬≥ = 0.125</strong> pero no suma</li>
                            <li>Cuarto bit fraccionario (0) vale <strong>2‚Åª‚Å¥ = 0.0625</strong> pero no suma</li>
                            <li>Quinto bit fraccionario (1) vale <strong>2‚Åª‚Åµ = 0.03125</strong></li>
                            <li>Sexto bit fraccionario (1) vale <strong>2‚Åª‚Å∂ = 0.015625</strong></li>
                        </ul>
                        Despu√©s de identificar esto, sumamos los valores de todas las potencias donde el bit sea 1.
                        <br>¬øQu√©
                        n√∫mero de mantisa obtienes?
                        </p>

                        <div class="input-group">
                            <label class="input-label">Mantisa en decimal:</label>
                            <input type="number" step="0.001" class="step-input" id="normalized-decimal"
                                placeholder="Ejemplo: 1.0765" disabled>
                        </div>

                        <button class="verify-button" id="verify-5" disabled>
                            <span>Verificar Resultado</span>
                        </button>

                        <div class="feedback-message" id="feedback-5" style="display: none;"></div>
                    </div>
                </div>
                <!-- Paso 6: Calcular el valor final -->
                <div class="conversion-step locked" id="step-6">
                    <div class="step-bar" id="bar-6"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number" id="number-6">6</div>
                            <h3>Calcular el valor decimal final</h3>
                        </div>
                        <div class="step-status locked" id="status-6">Bloqueado</div>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            Usa la f√≥rmula IEEE 754:
                            <br><strong>Valor = (-1)^signo √ó mantisa_normalizada √ó 2^exponente_real</strong>
                            <br><br>Con tus valores:
                            <br>‚Ä¢ Signo = 0
                            <br>‚Ä¢ Mantisa normalizada = 1.546875
                            <br>‚Ä¢ Exponente real = 3
                            <br><br>

                            Reemplaza en la f√≥rmula para encontrar el valor decodificado de la cadena trabajada a lo
                            largo
                            de todo el ejercicio ( 0 10000010 10001100000000000000000 )

                        </p>



                        <div class="input-group">
                            <label class="input-label">Valor decimal final:</label>
                            <input type="number" step="0.001" class="step-input" id="final-decimal"
                                placeholder="Ejemplo: -1.678" disabled>
                        </div>

                        <button class="verify-button" id="verify-6" disabled>
                            <span>Verificar Resultado</span>
                        </button>

                        <div class="feedback-message" id="feedback-6" style="display: none;"></div>
                    </div>
                </div>

                <!-- Resultado final -->
                <div class="conversion-step locked" id="final-result" style="display: none;">
                    <div class="step-bar correct"></div>
                    <div class="step-header">
                        <div class="step-title">
                            <div class="step-number correct">‚úì</div>
                            <h3>Resultado Final</h3>
                        </div>
                        <div class="step-status correct">Completado</div>
                    </div>
                    <div class="step-content">
                        <div
                            style="background: #f0fdf4; border: 1px solid #10b981; border-radius: 8px; padding: 1.5rem; text-align: center;">
                            <h2 style="margin: 0 0 1rem 0; color: #059669;">üéâ ¬°Conversi√≥n Completada!</h2>
                            <div style="font-size: 1.2rem; margin-bottom: 1rem;">
                                <div class="binary-input-display final">
                                    <div class="ieee-parts">
                                        <span class="ieee-part sign">0</span>
                                        <span class="ieee-separator"></span>
                                        <span class="ieee-part exponent">10000010</span>
                                        <span class="ieee-separator"></span>
                                        <span class="ieee-part mantissa">10001100000000000000000</span>
                                    </div>
                                </div>

                                <br>= <strong style="font-size: 1.5rem; color: #059669;">12.375</strong> (decimal)
                            </div>

                            <div
                                style="background: white; padding: 1rem; border-radius: 6px; margin-top: 1rem; text-align: left;">
                                <strong>Resumen del proceso:</strong>
                                <br>
                                <br>‚Ä¢ Signo: 0 ‚Üí Positivo
                                <br>‚Ä¢ Exponente: 10000010‚ÇÇ = 130‚ÇÅ‚ÇÄ ‚Üí Real: 130 - 127 = 3
                                <br>‚Ä¢ Mantisa: 1.100011‚ÇÇ = 1.546875‚ÇÅ‚ÇÄ
                                <br>‚Ä¢ Resultado: (+1) √ó 1.546875 √ó 2¬≥ = 12.375
                            </div>
                        </div>

                        <div class="feedback-message correct" style="margin-top: 1rem;">
                            <span>¬°Excelente! Has convertido correctamente de IEEE 754 a decimal.</span>
                        </div>
                    </div>
                </div>
        </div>

        <!-- Botones de navegaci√≥n -->
        <div class="footer-fixed">
            <div class="buttons">
                <button id="previousBtn" onclick="window.location.href='pag3.html';">Anterior</button>
                <button id="nextBtn" onclick="window.location.href='pag4.html';">Siguiente</button>
            </div>


            <div class="level-counter" id="levelIndicator">4 / ?</div>
        </div>
    </main>
</body>

</html>