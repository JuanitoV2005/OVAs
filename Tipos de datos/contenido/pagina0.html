<!-- Capítulo de complemento a 2 -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Primitivos en Java</title>
    <link rel="stylesheet" href="principal.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="p5-canvas.css">
    <link rel="stylesheet" href="complemento-a-2.css">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.2/lib/p5.min.js"></script>
</head>

<body>
    <div class="page">
        <h1>Complemento a 2:<br>Representación de Números Negativos</h1>
        <h2>Introducción</h2>
        <p>
            Ya sabemos cómo convertir un número como el 5 a su equivalente binario (00000101),
            pero ¿qué hacemos con los números negativos? La computación necesita una forma inteligente de manejar tanto
            positivos
            como negativos usando el mismo espacio de bits. Aquí es donde entra en juego el complemento a 2, la técnica
            que Java
            y la mayoría de los sistemas modernos utilizan para representar enteros negativos.
        </p>

        <p>
            Te invitamos a interactuar con el conversor de 1 byte a continuación, probando varios números.
            ¿Se te ocurre alguna idea de cómo funciona el complemento a 2 basándote en lo que ves?
        </p>



        <script src="rectaNumerica.js"></script>
        <div class="anchoCompleto" id="recta-complemento-a-2"></div>


        <h2>¿Por qué funciona?</h2>
        <p>
            La palabra "complemento" sugiere que algo falta para llegar a un todo.
            En el caso del complemento a 2, ese “todo” es una vuelta completa en nuestro sistema binario de 8 bits.
        </p>

        <p><strong>Imagina un reloj de 256 horas</strong></p>
        <p>
            En un sistema de 8 bits, solo podemos representar valores del <code>0</code> al <code>255</code>.
            Si sumamos <code>1</code> a <code>255</code>, el contador vuelve a cero, como si el sistema diera la vuelta.
            Este tipo de sistema se llama aritmética modular, porque los valores se "recortan" al llegar a un cierto
            límite (en este caso, módulo 256).
        </p>

        <section class="ejemplo-modulo">
            <div class="expresion">
                <span class="positivo">253</span>
                <span class="signo">+</span>
                <span class="negativo">3</span>
                <span class="igual">=</span>
                <span class="suma">256</span>
                <span class="modulo">(mod 256)</span>
                <span class="flecha">→</span>
                <span class="resultado">0</span>
            </div>
            <div class="expresion">
                <span class="positivo">253</span>
                <span class="signo">+</span>
                <span class="negativo">3</span>
                <span class="igual">=</span>
                <span class="suma">256</span>
                <span class="flecha">→</span>
                <span class="resultado">0</span>
                <span class="modulo">(mod 256)</span>
            </div>
            <div class="expresion">
                <span class="positivo">2</span>
                <span class="signo">+</span>
                <span class="negativo">254</span>
                <span class="igual">=</span>
                <span class="suma">256</span>
                <span class="flecha">→</span>
                <span class="resultado">0</span>
                <span class="modulo">(mod 256)</span>
            </div>
            <p class="explicacion-modulo">
                En un sistema de 8 bits, al sumar 253 y 3 obtenemos 256. <br>Como se desborda, el resultado es
                <strong>0</strong> bajo módulo 256.
            </p>
        </section>


        <p><strong>¿Y qué tiene que ver esto con los negativos?</strong></p>
        <p>
            ¡Aquí viene lo interesante! En matemáticas, el <strong>negativo de un número positivo es simplemente el valor que, 
            al sumarse, da como resultado cero</strong>. Piensa en <code>5 + (−5) = 0</code>. El sistema de complemento a 2 aplica 
            exactamente esta misma lógica al mundo binario. <strong>Cuando sumas un número binario a su complemento a 2, el resultado siempre será cero</strong>.
        </p> 
        <p>
            Esto funciona de manera consistente, ya sea que lo calcules con números decimales o que sumes directamente las cadenas de bits: 
        </p>
        <section class="ejemplo-modulo">
            <div id="complemento-dos-suma">
                <div class="linea-binaria">
                    <span class="simbolo-operacion"></span> <span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-uno">1</span><span
                        class="bit bit-cero">0</span>
                    <span class="valor-decimal">(+2)</span>
                </div>

                <div class="linea-binaria">
                    <span class="simbolo-operacion">+</span> <span class="bit bit-uno">1</span><span
                        class="bit bit-uno">1</span><span class="bit bit-uno">1</span><span
                        class="bit bit-uno">1</span><span class="bit bit-uno">1</span><span
                        class="bit bit-uno">1</span><span class="bit bit-uno">1</span><span
                        class="bit bit-cero">0</span>
                    <span class="valor-decimal">(-2)</span>
                </div>

                <div class="linea-separador"></div>

                <div class="linea-binaria" style="margin-bottom: 0.1rem; justify-content: flex-end;">
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span> <span
                        class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>
                    <span class="bit-acarreo" style="width: 1.2em; text-align: center;"></span>

                </div>


                <div class="linea-binaria resultado-binario">

                    <span class="simbolo-operacion"></span>
                    <span class="bit descartado">1</span>
                    <span class="bit bit-cero">0</span><span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-cero">0</span><span
                        class="bit bit-cero">0</span><span class="bit bit-cero">0</span>
                    <span class="valor-decimal">( 0)</span>
                </div>
            </div>

            <p class="resultado-explicacion">
                En el resultado, se produce un bit de acarreo en la novena posición desde la derecha. Este <code>1</code> se descarta porque estamos trabajando con números de 8 bits.
            </p>
        </section>






        

        <h2>Dibuja libremente</h2>
        <div id="canvas2"></div>

        <h2>Responde estas preguntas básicas de matemáticas:</h2>
        <form id="quiz">
            <label>
                1. ¿Cuánto es 2 + 2?
                <input type="text" name="q1">
            </label>

            <label>
                2. ¿Cuánto es 5 × 3?
                <input type="text" name="q2">
            </label>

            <label>
                3. ¿Cuánto es 9 − 4?
                <input type="text" name="q3">
            </label>

            <button type="button" onclick="validarFormulario()">Validar respuestas</button>
            <p id="resultadoFormulario"></p>
        </form>

        <nav>
            <a href="index.html">← Anterior</a>
            <a href="pagina3.html">Siguiente →</a>
        </nav>
    </div>

    <script src="sketch2.js"></script>

    <script>
        function validarFormulario() {
            const form = document.getElementById("quiz");
            const respuestas = {
                q1: "4",
                q2: "15",
                q3: "5"
            };

            let puntaje = 0;
            let respuestasUsuario = {};

            for (let [key, valorCorrecto] of Object.entries(respuestas)) {
                const input = form.elements[key];
                const respuestaUsuario = input.value.trim();
                respuestasUsuario[key] = respuestaUsuario;

                input.classList.remove("correcto", "incorrecto"); // LIMPIAR primero

                if (respuestaUsuario === valorCorrecto) {
                    input.classList.add("correcto");
                    puntaje += 1;
                } else {
                    input.classList.add("incorrecto");
                }
            }

            localStorage.setItem("respuestas2", JSON.stringify(respuestasUsuario));
            localStorage.setItem("formulario2", puntaje);

            document.getElementById("resultadoFormulario").innerText =
                `Respuestas correctas: ${puntaje} / 3`;
        }

        window.addEventListener("load", () => {
            const form = document.getElementById("quiz");
            const guardadas = JSON.parse(localStorage.getItem("respuestas2") || "{}");
            const respuestas = {
                q1: "4",
                q2: "15",
                q3: "5"
            };

            for (let key in guardadas) {
                const input = form.elements[key];
                input.value = guardadas[key];

                input.classList.remove("correcto", "incorrecto"); // LIMPIAR antes de aplicar

                if (guardadas[key] === respuestas[key]) {
                    input.classList.add("correcto");
                } else {
                    input.classList.add("incorrecto");
                }
            }

            const puntaje = localStorage.getItem("formulario2");
            if (puntaje !== null) {
                document.getElementById("resultadoFormulario").innerText =
                    `Respuestas correctas: ${puntaje} / 3`;
            }
        });
    </script>
</body>

</html>